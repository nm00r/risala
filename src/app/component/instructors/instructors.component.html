<div class="instructors-page">
  
  <!-- Page Header with Welcome and Action Buttons -->
  <div class="page-header mb-4">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
      <div>
        <h4 class="mb-0 fw-bold">ุฅุฏุงุฑุฉ ุงููุนูููู๐จโ๐ซ</h4>
        <p class="text-muted mb-0 mt-1" style="font-size: 0.875rem;">ุฅุฏุงุฑุฉ ุฌููุน ุงููุนูููู ูุงููุฏุฑุจูู</p>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-primary" (click)="openAddInstructorModal()" [disabled]="isLoading">

          ุฅุถุงูุฉ ูุนูู
           <i class="bi bi-plus-lg me-2"></i>
        </button>
      </div>
    </div>
  </div>
  <!-- Loading Spinner -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">ุฌุงุฑู ุงูุชุญููู...</span>
    </div>
    <p class="mt-3 text-muted">ุฌุงุฑู ุชุญููู ุงูุจูุงูุงุช...</p>
  </div>

  <!-- Shared Table Component -->
  <app-table
    *ngIf="!isLoading"
    [data]="instructors"
    [columns]="tableColumns"
    [actions]="tableActions"
    [title]="'ูุงุฆูุฉ ุงููุนูููู'"
    [searchPlaceholder]="'ุจุญุซ ุนู ูุนูู...'"
    [showSearch]="true"
    [showFilter]="true"
    [showCheckboxes]="true"
    [itemsPerPage]="itemsPerPage"
    [currentPage]="currentPage"
    [totalItems]="instructors.length"
    (rowClick)="onRowClick($event)"
    (searchChange)="onSearch($event)"
    (pageChange)="onPageChange($event)"
    (selectionChange)="onSelectionChange($event)"
    (sortChange)="onSortChange($event)">
  </app-table>

  <!-- Add/Edit Instructor Modal -->
  <div class="modal fade" [class.show]="showAddInstructorModal" [style.display]="showAddInstructorModal ? 'block' : 'none'" tabindex="-1">
    <div class="modal-backdrop fade" [class.show]="showAddInstructorModal" (click)="closeAddInstructorModal()"></div>
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content">
        
        <!-- Modal Header -->
        <div class="modal-header border-0 pb-0">
          <button type="button" class="btn-close" (click)="closeAddInstructorModal()" [disabled]="isLoading"></button>
          <h5 class="modal-title fw-bold">{{ isEditMode ? 'ุชุนุฏูู ุงููุนูู' : 'ุฅุถุงูุฉ ูุนูู ุฌุฏูุฏ' }}</h5>
        </div>

        <!-- Modal Body -->
        <div class="modal-body pt-3">
          <form>
            <!-- First Name and Last Name -->
            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label">ุงูุงุณู ุงูุฃูู <span class="text-danger">*</span></label>
                <input 
                  type="text" 
                  class="form-control" 
                  [(ngModel)]="instructorForm.firstName"
                  name="firstName"
                  [disabled]="isLoading"
                  placeholder="ูุซุงู: ุฃุญูุฏ">
              </div>
              <div class="col-md-6">
                <label class="form-label">ุงุณู ุงูุนุงุฆูุฉ <span class="text-danger">*</span></label>
                <input 
                  type="text" 
                  class="form-control" 
                  [(ngModel)]="instructorForm.lastName"
                  name="lastName"
                  [disabled]="isLoading"
                  placeholder="ูุซุงู: ูุญูุฏ">
              </div>
            </div>

            <!-- Phone Number and Gender -->
            <div class="row mb-3">
              <div class="col-md-6">
                <label class="form-label">ุฑูู ุงููุงุชู <span class="text-danger">*</span></label>
                <input 
                  type="tel" 
                  class="form-control" 
                  [(ngModel)]="instructorForm.phoneNumber"
                  name="phoneNumber"
                  [disabled]="isLoading"
                  placeholder="01xxxxxxxxx">
              </div>
              <div class="col-md-6">
                <label class="form-label">ุงูููุน <span class="text-danger">*</span></label>
                <select 
                  class="form-select dropdown-select-rtl" 
                  [(ngModel)]="instructorForm.gender"
                  name="gender"
                  [disabled]="isLoading">
                  <option value="M">ุฐูุฑ</option>
                  <option value="F">ุฃูุซู</option>
                </select>
              </div>
            </div>

            <!-- Email and Password (Only for new instructors) -->
            <div class="row mb-3" *ngIf="!isEditMode">
              <div class="col-md-6">
                <label class="form-label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู <span class="text-danger">*</span></label>
                <input 
                  type="email" 
                  class="form-control" 
                  [(ngModel)]="instructorForm.email"
                  name="email"
                  [disabled]="isLoading"
                  placeholder="example@email.com">
              </div>
              <div class="col-md-6">
                <label class="form-label">ูููุฉ ุงููุฑูุฑ <span class="text-danger">*</span></label>
                <input 
                  type="password" 
                  class="form-control" 
                  [(ngModel)]="instructorForm.password"
                  name="password"
                  [disabled]="isLoading"
                  placeholder="โขโขโขโขโขโขโขโข">
              </div>
            </div>

            <!-- Title (Optional) -->
            <div class="mb-3">
              <label class="form-label">ุงูููุจ ุงูุนููู</label>
              <input 
                type="text" 
                class="form-control" 
                [(ngModel)]="instructorForm.title"
                name="title"
                [disabled]="isLoading"
                placeholder="ูุซุงู: ุฏูุชูุฑุ ูููุฏุณุ ุฃุณุชุงุฐ">
            </div>

            <!-- Description -->
            <div class="mb-3">
              <label class="form-label">ูุตู ุงููุนูู <span class="text-danger">*</span></label>
              <textarea 
                class="form-control" 
                [(ngModel)]="instructorForm.description"
                name="description"
                [disabled]="isLoading"
                rows="4"
                placeholder="ุงูุชุจ ูุจุฐุฉ ูุฎุชุตุฑุฉ ุนู ุงููุนููุ ุฎุจุฑุงุชูุ ููุคููุงุชู..."></textarea>
              <div class="form-text">ูุตู ููุฌุฒ ุนู ุงููุนูู ูุฎุจุฑุงุชู ููุคููุงุชู ุงูุนูููุฉ</div>
            </div>
          </form>
        </div>

        <!-- Modal Footer -->
        <div class="modal-footer border-0 pt-0">
          <button type="button" class="btn btn-outline-secondary" (click)="closeAddInstructorModal()" [disabled]="isLoading">
            ุฅูุบุงุก
          </button>
          <button type="button" class="btn btn-primary" (click)="addInstructor()" [disabled]="isLoading">
            <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2" role="status"></span>
            <i *ngIf="!isLoading" class="bi bi-{{ isEditMode ? 'check-lg' : 'plus-lg' }} me-2"></i>
            {{ isEditMode ? 'ุญูุธ ุงูุชุนุฏููุงุช' : 'ุฅุถุงูุฉ ุงููุนูู' }}
          </button>
        </div>

      </div>
    </div>
  </div>

</div>